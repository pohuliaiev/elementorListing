(()=>{"use strict";new class{constructor(){this.dropdownElement=document.querySelectorAll(".filter-dropdown"),this.filterButton=document.getElementById("listing-filter-submit"),this.marketSelect=document.getElementById("market-select"),this.citySelect=document.getElementById("city-select"),this.cityId=this.citySelect.getAttribute("data-id"),this.marketId=this.marketSelect.getAttribute("data-id"),this.preloader=document.getElementById("preloader"),this.overlay=document.getElementById("fadeOverlay"),this.events()}events(){if(this.dropdownElement.forEach((function(t){const e=t.getAttribute("data-select"),n=document.getElementById(e);t.querySelectorAll("li").forEach((function(t){t.addEventListener("click",(function(){n.setAttribute("data-id",t.getAttribute("data-id"))}))}))})),this.filterButton){const t=this.preloader,e=this.overlay;this.filterButton.addEventListener("click",(n=>{const i=document.getElementById("city-select").getAttribute("data-id"),s=document.getElementById("market-select").getAttribute("data-id");console.log(i,s),n.preventDefault(),t.classList.remove("d-none"),e.style.display="block",jQuery.ajax({type:"POST",url:elementorListingsAjax.ajaxurl,data:{action:"elementor_listings_ajax_request",nonce:elementorListingsAjax.nonce,city_id:i,market_id:s},success:function(n){t.classList.add("d-none"),e.style.display="none",console.log("AJAX response:",n),document.getElementById("listing-wrapper").innerHTML="";const i=n.data.map((t=>`\n                        <div class="card listing-widget-item">\n                    <img src="${t.image}" class="card-img-top" alt="...">\n                    <div class="card-body">\n                        <h4 class="mb-1 fs-xs fw-normal text-uppercase text-primary">${t.market}</h4>\n                        <a href="${t.link}"><h5 class="card-title">${t.title}</h5></a>\n                        <p class="mb-2 fs-sm text-muted">${t.adress}</p>\n                        <div class="hp-listing__attributes hp-listing__attributes--primary">\n                            <div class="fw-bold">\n                                <i class="fi-cash mt-n1 me-2 lead align-middle opacity-70"></i>\n                                $ ${t.price}\n                            </div>\n                        </div>\n                        <div class="card-footer mt-4 d-flex align-items-center justify-content-center mx-3 pt-3 text-nowrap hp-listing__attributes hp-listing__attributes--secondary">\n                            <span class="d-inline-block mx-1 px-2 fs-sm">${t.rooms}\n                                <i class="finder-icon ms-1 mt-n1 fs-lg text-muted fi-bed"></i>\n                            </span>\n                            <span class="d-inline-block mx-1 px-2 fs-sm">${t.bathroom}\n                                <i class="finder-icon ms-1 mt-n1 fs-lg text-muted fi-bath"></i>\n                            </span>\n                            ${"on"===t.parking?'<span class="d-inline-block mx-1 px-2 fs-sm"><i class="finder-icon ms-1 mt-n1 fs-lg text-muted fi-car"></i></span>':""}\n                           \n                        </div>\n                    </div>\n                </div>\n                        `)).join("");document.getElementById("listing-wrapper").insertAdjacentHTML("beforeend",i)},error:function(t,e,n){console.error("AJAX request failed"),console.error(t.responseText)}})}))}}}})();